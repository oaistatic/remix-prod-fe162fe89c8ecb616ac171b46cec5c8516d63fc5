const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/b3iluazaj35spqd5.js","assets/dr5q0mnwgdiuy1ac.js","assets/lklglvrzltpv3f05.js","assets/root-fllmzfn1.css","assets/fn5bn67vlrtkutmt.js","assets/conversation-small-bez2bigx.css","assets/idmewz7vluiimwla.js","assets/c5btnvyxlzh1g9bg.js","assets/evk8hxf7fhyx3i51.js","assets/jo8bsv1qkxqoovu7.js","assets/c4bxzbp1808foto4.js","assets/b1m7o3v0cot4r8cp.js","assets/flw428d8el012wn5.js","assets/gvzs5psd5zlducxo.js","assets/fz06oo2t1lk07zuj.js","assets/eepk5d1bamwc6eg6.js","assets/cuav3gl4u7ecbt92.js","assets/ldct8kzq8358co6k.js","assets/e0j7g4azm9nlvt6p.js","assets/kwfnt7q4maeym4cv.js","assets/oggr4qblywivx1kc.js","assets/kmcda7yv67z85pgk.js","assets/fbu84jjzpk28uqob.js","assets/bp6ccvv5sjznfymx.js","assets/hwjau6suar4k89e3.js","assets/pazn8rkwcoqz0ouv.js","assets/j98tw61tezo8a6z6.js","assets/mdylbnxkm2hxmuml.js","assets/orr5j0jff9runsnx.js","assets/k3hicc8rbwef28my.js","assets/imfb550ot6cls48g.js","assets/cyqh5pewhk34cwzb.js","assets/ijwsqx5b9y4rlvqu.js","assets/d197qvlrpr6mqktk.js","assets/mbcli3pj0pk6s5ys.js","assets/fzrn137102spawew.js","assets/j9pn3dpqp3dnyeg5.js","assets/lr2wtvbk3k0uolp8.js","assets/om2p4xi8usxgcif2.js","assets/btagl6w1gub4aw61.js","assets/d1ykkisndj2pwwgh.js","assets/g4tl5lt9yqf20m4s.js"])))=>i.map(i=>d[i]);
import{d$ as G,cf as K,en as q,dW as L,ge as _,aV as v,aW as j,dN as y,gv as Q,dL as J,dZ as X,aw as Y,cB as C,N as $,ao as Z,aa as ee,d6 as N,v as P,bo as se,D as ae,cJ as te,cK as re,ds as ie,fq as oe,J as ne}from"./dr5q0mnwgdiuy1ac.js";import{r as n,j as e,ad as M,e as de,a as ce,c as le,ac as m,d as A,f as ue,u as he}from"./lklglvrzltpv3f05.js";import{iA as me,iB as D,iC as fe,hw as xe,iD as F,hy as b,h7 as ge,bL as T,bM as k,o as pe,u as be,p as ve,cp as je,cz as we,v as Se,w as ye,D as Ce,iE as Te,m as Ee,co as Ie,T as _e,q as Ne,x as Pe,iF as Ae,cc as Fe,iG as ke,iH as Ve,cF as Oe,cG as V,iI as Le,aK as Me,iJ as De,iK as Re,bu as Ue,cn as ze,dm as Be,iL as He,iM as We,iN as Ge,dn as Ke,iO as qe,cd as Qe}from"./fn5bn67vlrtkutmt.js";import{C as Je}from"./b1m7o3v0cot4r8cp.js";import{a as R,u as E}from"./gvzs5psd5zlducxo.js";import{C as U}from"./bp6ccvv5sjznfymx.js";import{a as Xe}from"./e0j7g4azm9nlvt6p.js";import{C as Ye}from"./hwjau6suar4k89e3.js";function $e(){const a=me(t=>t.notifications),{activeThreadIds:s}=G();return n.useEffect(()=>{a.filter(r=>r.clientThreadId===void 0||s.has(r.clientThreadId)).map(r=>r.id).filter(r=>r!==void 0).forEach(r=>D(r))},[s,a]),a.length===0||K?null:e.jsx("div",{className:"fixed right-4 top-8 my-2 flex max-h-[90vh] flex-col-reverse space-y-2 space-y-reverse overflow-y-auto px-2 py-4",children:e.jsx(M,{children:a.map(t=>e.jsx(Ze,{...t},t.id))})})}function Ze({...a}){const s=de(),t=ce(),r=le(),o=q(a.clientThreadId),d=()=>{o&&xe(s,t,o),a.id&&D(a.id)};return e.jsxs(m.div,{onClick:d,className:"inline-flex w-80 cursor-pointer items-center justify-start gap-2.5 rounded-2xl border border-token-border-light bg-token-main-surface-primary px-3 py-3 align-middle shadow-lg",initial:{opacity:0,x:320},animate:{opacity:1,x:0},exit:{opacity:0,x:320},transition:{duration:.5},children:[e.jsx(fe,{iconName:"openai",size:"medium",className:"border-token-secondary rounded-full border bg-token-main-surface-primary text-token-text-primary"}),e.jsxs("div",{className:"inline-flex w-full shrink grow basis-0 flex-col items-start justify-start overflow-hidden",children:[e.jsx("div",{className:"w-full truncate text-sm font-medium text-token-text-primary",children:a.title??r.formatMessage({id:"mpXAeu",defaultMessage:"New chat"})}),e.jsx("div",{className:"w-full truncate text-sm text-token-text-tertiary",children:a.subtitle??r.formatMessage({id:"qMEc8J",defaultMessage:"New Message"})})]})]})}const O=450;function es({children:a,clientThreadId:s,isOpen:t,onClose:r}){const o=L();return e.jsxs(M,{children:[t&&o&&e.jsx(R,{clientThreadId:s,children:e.jsx(_,{children:e.jsx(F.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(m.div,{className:"h-full w-full bg-token-main-surface-secondary",...b}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx(m.div,{className:"relative shrink-0 border-r border-token-border-medium bg-token-main-surface-primary",style:{width:O},...b,children:e.jsx(U,{hideHeader:!0,hideTools:!0})}),e.jsx("div",{className:"relative flex-grow overflow-auto",children:a})]})]})})})}),t&&!o&&e.jsx(_,{children:e.jsx(F.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(m.div,{className:"h-full w-full bg-token-main-surface-secondary",...b}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"flex-grow overflow-auto",children:a}),e.jsx(m.div,{className:"relative shrink-0 border-l border-token-border-medium bg-token-main-surface-primary",style:{width:O},...b,children:e.jsx("div",{className:"h-[100vh] pb-4",children:e.jsx(Xe,{clientThreadId:s,hideHeader:!0,hideFooter:!0,hideToolsOverlay:!0,messagesVerticalAlign:"bottom"},s)})})]})]})})})]})}const ss=v(()=>j(()=>import("./b3iluazaj35spqd5.js"),__vite__mapDeps([0,1,2,3,4,5]))),as=v(()=>j(()=>import("./idmewz7vluiimwla.js"),__vite__mapDeps([6,1,2,3,4,5,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25])).then(a=>a.ImageEditor));function ts({clientThreadId:a}){const s=ge();n.useEffect(()=>{T.close()},[a]);let t;return s?.type===k.ADAVisualization?t=e.jsx(ss,{clientThreadId:a,visualization:s.visualization}):s?.type===k.Image&&(t=e.jsx(as,{clientThreadId:a,messageId:s.messageId,image:s.image,allImages:s.allImages},s.image.asset_pointer)),e.jsx(es,{clientThreadId:a,isOpen:s!=null,onClose:T.close,children:t})}function rs(){const{clientThreadId:a,resetThread:s}=E();return pe({resetThreadAction:s,clientThreadId:a}),null}const is=v(()=>j(()=>import("./j98tw61tezo8a6z6.js"),__vite__mapDeps([26,2,4,1,3,5,27,19,28,29,30,31,32,33,13,34,35,36,20,21,37,38,39])).then(a=>a.CanvasFocusedViewManager)),os=64;function ns(){const{focusedObject:a,clientThreadId:s}=E();y(void 0);const t=n.useRef(null),r=Q(p=>p.height),o=be(),d=y("searchSources"),f=y("summarizer"),i=J(),[c,w]=n.useState(!1),S=!o&&!!a;let u=r??0;c&&(u+=os);const x=ve(),h=X(),g=!h.get("enable_arch_updates",!1)||h.get("include_legacy_sidebar_contents",!1);return e.jsx(je,{className:Y(C.application,"keyboard-open:[--keyboard-height-multiplier:1]",{[C.withCanvasFocusedView]:!!o,[C.withEmbeddedFocusedView]:S}),banner:e.jsx($,{children:e.jsx(we,{setIsMobileAppUpsellBannerVisible:w})}),sidebar:!g&&e.jsx(Ye,{}),thread:e.jsx(U,{ref:t},s),details:e.jsx(is,{clientThreadId:s}),threadExtendedInfo:i&&e.jsxs(e.Fragment,{children:[!1,d&&e.jsx(Se,{clientThreadId:s}),x&&f&&e.jsx(ye,{clientThreadId:s})]}),debugger:e.jsx(Ce,{clientThreadId:s}),name:"application-root",style:{"--screen-height-offset":u>0?`${u}px`:""}})}function ds(){const{clientThreadId:a,currentModelId:s,isCompanionWindow:t}=E();return e.jsx(Te,{conversationId:a,currentModelId:s,isActiveWindow:!t})}function cs({clientThreadId:a,urlThreadId:s}){return Ee({clientThreadId:a}),e.jsxs(Ie,{children:[e.jsx(ds,{}),e.jsx(rs,{}),e.jsxs(_e,{enableSandbox:!0,clientThreadId:a,children:[e.jsx(Ne,{clientThreadId:a,urlThreadId:s}),e.jsx(Pe,{}),e.jsx(ns,{})]})]})}var ls={};const us=v(()=>j(()=>import("./d1ykkisndj2pwwgh.js"),__vite__mapDeps([40,2,1,3,4,5,13,23,18,19,20,21,22,16,14,15,12,41])));function ws(a){const{urlThreadId:s,clientThreadId:t,prefetchSearch:r}=a;hs();const o=Z(),d=A(),[f]=ue(),[i,c]=n.useState(()=>s!==void 0?ee.getClientNewThreadIdForServerThreadId(s)??s:t!==void 0?t:N());s!==void 0&&i!==s&&(P.getServerThreadId(i)===s||c(s));const w=Ae(A());n.useEffect(()=>{s===void 0&&P.getServerThreadId(i)!==void 0&&c(N())},[s,i,w]);const S=Fe(Qe.workspaceId),u=L(),{eligible:x,isLoading:h,markAsViewed:g}=ke(),p=Ve(),z=se("3435450078");n.useEffect(()=>{(d.pathname==="/"||d.pathname.startsWith("/c/"))&&Oe({namespace:V.ChatPageLoad})==null&&(Le({namespace:V.ChatPageLoad,opts:{expectedTimingLogs:[{name:"render_model_switcher",expectedInMs:1e4},{name:"render_history_items",expectedInMs:25e3}]}}),ae.addTiming("chatgpt.web.chatPage.mounted"))},[]);const I=Me();n.useEffect(()=>{te(!0).then(l=>{l.force_login&&I({authType:"login"}),De.initializeAndGatherData(l),re.initializeAndGatherData(l)})},[I]),n.useEffect(()=>{const l=f.get(Re)==="true";o!==l&&ie.setIsTemporaryChatEnabled(l)},[o,f]),n.useEffect(()=>{d.state?.focusObject&&T.setFocusedObject(d.state.focusObject)},[d.state?.focusObject]),n.useEffect(()=>{!h&&x&&(g(),p())},[x,h,g,p]);const{isOpen:B,isLoading:H}=Ue(),W=u?cs:Je;return e.jsx(oe.Provider,{value:null,children:e.jsx(ze,{children:e.jsxs(Be,{clientThreadId:i,children:[e.jsx(He,{clientThreadId:i},S),!H&&B&&e.jsx(us,{clientThreadId:i,setClientThreadId:c}),e.jsx(We,{}),e.jsx(Ge,{}),e.jsx(R,{clientThreadId:i,setClientThreadId:c,prefetchSearch:r,children:e.jsx(W,{urlThreadId:s,clientThreadId:i,setClientThreadId:c,prefetchSearch:r})}),e.jsx(ts,{clientThreadId:i}),e.jsx(Ke,{clientThreadId:i}),e.jsx(qe,{}),z?e.jsx($e,{}):!1]})})})}function hs(){he({queryKey:["pingEdge"],queryFn:()=>ne.pingEdge(),enabled:!0,staleTime:1/0})}typeof window<"u"&&(window._g=ls.GOKU_SERVICE);export{ws as C,O as F};
//# sourceMappingURL=k7xgus1vx0alzbdb.js.map
