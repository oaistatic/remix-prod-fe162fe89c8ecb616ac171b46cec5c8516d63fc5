const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/eepk5d1bamwc6eg6.js","assets/lklglvrzltpv3f05.js","assets/fn5bn67vlrtkutmt.js","assets/dr5q0mnwgdiuy1ac.js","assets/root-fllmzfn1.css","assets/conversation-small-bez2bigx.css","assets/cuav3gl4u7ecbt92.js","assets/gvzs5psd5zlducxo.js","assets/cmara2dichjyz70s.js","assets/lmjfgdickjuj9qsu.js","assets/ja29iaaaom5gcvc8.js","assets/oz3uzvtgxqgxag0v.js"])))=>i.map(i=>d[i]);
import{r as i,j as e,M as _,c as A,a as oe}from"./lklglvrzltpv3f05.js";import{cA as w,P as m,cM as V,cB as q,dS as ce,O as K,dT as le,cI as Q,jc as de,R as ue,eI as me,jd as fe,je as he,g4 as xe,eN as ge,jf as Se,jg as W,gq as be,jh as L,aM as R,ji as Z,jj as pe,jk as E,jl as y,eB as ve,gr as je,jm as ye,J as Ce,jn as Ie,M as Oe,bS as Ne,jo as ke,jp as $,Q as Fe,jq as Te,ck as Me}from"./fn5bn67vlrtkutmt.js";import{cA as J,aw as h,N as O,S as ze,F as Ee,en as _e,ao as Ae,d$ as we,cR as Le,ch as Re,aV as X,aW as Y,o as ee,d5 as De,b2 as se,gC as x,dZ as Ge,a4 as Pe,a5 as Be,fG as He,dM as I,aX as Ue,f as We}from"./dr5q0mnwgdiuy1ac.js";import{u as D,f as Ve}from"./gvzs5psd5zlducxo.js";import{G as te,g as qe,E as Ke}from"./pazn8rkwcoqz0ouv.js";import{e as Qe,P as Ze}from"./flw428d8el012wn5.js";import{a as $e}from"./cuav3gl4u7ecbt92.js";function Je(s){const{clientThreadId:n}=D(),t=i.useRef(s);t.current=s;const o=i.useRef(null);i.useEffect(()=>{const a=o.current;return o.current=n,()=>{n!==a&&t.current?.(n,a)}},[n])}function Xe({currentGizmoId:s,gizmos:n,onClick:t}){const{isSidebarFlyoutOpen:o,onSidebarFlyoutOpenChange:a}=w(),f=o(m.Gizmo),r=V();return e.jsx("div",{className:"group mt-1 flex w-full items-center justify-start",children:e.jsx(J,{onOpenChange:g=>a(m.Gizmo,g),side:r?"bottom":"right",sideOffset:4,open:f,contentAlign:"end",triggerButton:e.jsxs("button",{className:h("flex flex-1 select-none items-center gap-2.5 rounded-lg px-2 py-[7px] text-body tracking-condensed text-token-text-secondary ease-[var(--spring-bounce)] hover:bg-token-main-surface-secondary focus:ring-0 motion-safe:active:scale-[98%] motion-safe:active:transition-transform",f&&"bg-token-main-surface-secondary"),onClick:t,children:[e.jsx("div",{className:"h-6 w-6",children:e.jsx("div",{className:"relative flex h-full items-center justify-center text-token-text-primary",children:e.jsx(q,{className:h("icon-md font-semibold text-token-sidebar-icon")})})}),e.jsx("span",{className:"text-left",children:e.jsx(_,{id:"qTIiY/",defaultMessage:"See more"})})]}),size:"auto",children:e.jsx("div",{className:"max-h-[50dvh] w-80 overflow-x-auto px-2 [scrollbar-gutter:stable]",children:e.jsx(O,{children:e.jsx("ul",{className:"flex flex-col gap-0.5",children:e.jsx(te,{gizmo:n,currentGizmoId:s,hideOverflowMenu:!0})})})})})})}function Ye({currentGizmoId:s}){const{data:{gizmos:n}={}}=ce();let t=n;K()&&(t=n?.filter(f=>!le(f.resource)));const{needsToCollapseItems:a}=qe({gizmos:t??[],isGizmoFlyout:!1,isScreenArch:!0});return e.jsx(e.Fragment,{children:e.jsxs(Q,{header:e.jsx("div",{className:"sticky top-[--sidebar-sticky-threshold] z-20",children:e.jsx(_,{id:"ZT2HVu",defaultMessage:"GPTs"})}),isLastInGroup:!0,children:[e.jsx(Ke,{}),e.jsx(te,{gizmo:t??[],currentGizmoId:s,maxToShowOnLoad:de}),a&&e.jsx(O,{children:e.jsx(Xe,{currentGizmoId:s,gizmos:t??[]})})]})})}function es({onClick:s}){const{clientThreadId:n}=D(),{isSidebarFlyoutOpen:t,onSidebarFlyoutOpenChange:o}=w(),a=V(),f=t(m.Conversation);return e.jsx("div",{className:"group mt-1 flex w-full items-center justify-start",children:e.jsx(J,{onOpenChange:r=>{r&&ze.logEvent("chatgpt_web_more_conversation_history_opened"),o(m.Conversation,r)},side:a?"bottom":"right",sideOffset:4,open:f,contentAlign:"start",triggerButton:e.jsxs("button",{className:h("flex flex-1 select-none items-center gap-2 rounded-lg px-2 py-2 text-body tracking-condensed text-token-text-secondary ease-[var(--spring-bounce)] hover:bg-token-main-surface-secondary focus:ring-0 motion-safe:active:scale-[98%] motion-safe:active:transition-transform",f&&"bg-token-main-surface-secondary"),onClick:s,children:[e.jsx(q,{className:h("icon-md mr-1 font-semibold text-token-sidebar-icon")}),e.jsx("span",{className:"text-left",children:e.jsx(_,{id:"25xE8F",defaultMessage:"See more"})})]}),size:"auto",children:e.jsx("div",{className:"max-h-[50dvh] w-80 overflow-x-auto px-2 [scrollbar-gutter:stable]",children:e.jsx(O,{children:e.jsx(ue,{activeId:n,hideOverflowMenu:!0})})})})})}function ss({clientThreadId:s}){const n=Ee(),t=A(),o=oe(),a=_e(s),f=Ae(),r=me(),g=we().activeServerThreadIds,{isCollapsible:p,recentConversationLimit:v}=fe(),S={recentConversationLimit:v},[j,u]=i.useState(!1),c=i.useRef(!1),l=!0,{conversations:b,data:N,isLoading:k,isError:ne,recents:F,refetch:G}=he(S),[ae,P]=i.useState(!0),B=i.useCallback(function(z){z===void 0&&P(!1),G({cancelRefetch:!0})},[G,P]),T=f?void 0:a,re=b.length===0,H=ne||N===void 0&&!k&&c.current,ie=!H&&(N===void 0||k);N===void 0&&!k&&!c.current&&(c.current=!0,B(!0));const U=b.find(d=>d.id===T)??null;i.useMemo(()=>{Le.publish({kind:"refreshHistory",conversations:b})},[b]);const C=r!=null&&r.kind==="conversation"&&r.gizmoId!=null&&xe(r.gizmoId),M=i.useRef(0);return e.jsxs("div",{onDragOver:d=>{d.preventDefault(),C&&u(!0)},onDrop:d=>{d.preventDefault(),C&&(u(!1),ge(n,t,o,r.conversationId,null,r.gizmoId))},onDragEnter:d=>{d.preventDefault(),C&&(M.current+=1)},onDragLeave:d=>{d.preventDefault(),C&&(M.current-=1,M.current===0&&u(!1))},className:h(j&&"opacity-50"),children:[H&&e.jsx(Se,{showRetry:ae,refetch:B}),!re&&e.jsxs(Q,{header:F.label,isLastInGroup:!0,children:[F.items.map((d,z)=>e.jsx(W,{item:d,isActiveInMainWindow:d.id===T,isActive:g.has(d.id),testId:`history-item-${z}`},d.id)),U&&!F.items.some(d=>d.id===T)&&e.jsx(W,{item:U,isActiveInMainWindow:!0,isActive:!0})]}),ie&&e.jsx(Re,{className:"sticky top-4 z-30 mt-4 justify-self-center"}),p&&e.jsx(O,{children:e.jsx("div",{className:"-ml-2 mb-5",children:e.jsx("div",{hidden:!l,className:h(!l),children:e.jsx(es,{})})})})]})}const ts=X(()=>Y(()=>import("./eepk5d1bamwc6eg6.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])).then(s=>s.SnorlaxSidebarList));function ns({clientThreadId:s}){const n=ee(),t=De(s),{isUnauthenticated:o}=se(),a=K();return o?null:e.jsxs("div",{className:h(x.screenContent,"group/sidebar"),children:[a&&e.jsx(ts,{currentGizmoId:t}),null,e.jsx(ss,{clientThreadId:s}),n?.canInteractWithGizmos()?e.jsx(Ye,{currentGizmoId:t}):null]})}function as(){const s=ee(),n=s?.data==null,{isUnauthenticated:t}=se(),{openSettings:o}=be(),a=Ge(),[f]=i.useState(()=>{const c=Pe.getCookie(Be.Workspace);return typeof c=="string"&&c!==He}),r=A(),{store:g,actions:p}=L(),v=g(c=>c.mode),[S,j]=i.useState(!0);if(i.useEffect(()=>{j(!1)},[]),!s&&S||f&&n)return null;const u=t?e.jsx(Qe,{}):e.jsx(Ve,{onClickSettings:()=>o()});return e.jsxs(R,{name:"user-profile-bar",className:"z-10 mb-[0.5px] grid-cols-[minmax(0,_1fr)_auto] px-sidebar-inline md:pb-1.5 md:pt-2.5",type:"primary",disableSizeTracking:!0,trailing:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:[u,a.get("include_floating_state",!1)&&e.jsx("div",{className:x.togglePinWrapper,children:e.jsx(Z,{tooltipSideOffset:14,className:x.pinSidebarAction,icon:e.jsx(pe,{}),onActivate:c=>{c.preventDefault(),c.persist(),E.togglePinSidebar(c,p,v===y.Floating?y.Pinned:y.Floating)},label:v===y.Floating?r.formatMessage({id:"b43Hkt",defaultMessage:"Pin Sidebar"}):r.formatMessage({id:"6m3n9w",defaultMessage:"Unpin Sidebar"}),htmlFor:I.FloatingOrPinned})})]})}function rs(){return e.jsx(R,{className:"z-10 px-sidebar-inline pb-0.5 empty:hidden",type:"primary",disableSizeTracking:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:e.jsx(Ze,{})})}function is(){return e.jsxs(ve,{className:h(x.screenTrailingBarContainer),children:[e.jsx(je,{}),e.jsx(rs,{}),e.jsx(as,{})]})}const os=X(()=>Y(()=>import("./cmara2dichjyz70s.js"),__vite__mapDeps([8,1,2,3,4,5,9,10,11])).then(s=>s.FannyPackIconButton));function cs({onNewThread:s}){const n=A(),t=i.useRef(null),{store:o,actions:a}=L(),f=o(l=>l.isSidebarOpen),r=o(l=>l.mode),{isSidebarFlyoutOpen:g}=w(),p=g(m.Conversation),v=g(m.Gizmo),S=g(m.Snorlax),j=f&&!p&&!v&&!S;function u(){$(t.current)&&document.getElementById(I.OpenOrClosed)?.click()}ye({checkElement:l=>l?.tagName==="NAV",enabled:j,onLightDismiss:u});const{isFannyPackEnabled:c}=Ce();return Ue(),e.jsxs(e.Fragment,{children:[e.jsx(R,{type:"primary",className:h(x.screenHeader),name:"sidebar-header",children:e.jsxs("div",{className:"flex min-h-[var(--screen-thread-header-min-height,60px)] w-full flex-1 items-center justify-between px-[var(--sidebar-inline-padding)]",ref:t,children:[e.jsx("div",{className:"grid items-center gap-1",children:e.jsx(Z,{className:h(x.closeSidebarAction),style:{viewTransitionName:"var(--vt_toggle_sidebar_opened)"},onClick:l=>{E.closeSidebar(l,a,r)},onActivate:l=>{E.closeSidebar(l,a,r)},icon:e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:h(x.sidebarIcon,"hidden @lg/screen-composer:inline-flex")}),e.jsx(Oe,{className:h(x.sidebarIcon,"@xs/screen-composer:inline-flex @lg/screen-composer:hidden")})]}),label:n.formatMessage(ls.closeSidebar),htmlFor:I.OpenOrClosed,tooltipSideOffset:4})}),e.jsxs("div",{className:"flex items-center",children:[!1,c&&e.jsx(Ne,{children:e.jsx(os,{className:x.searchAction,icon:e.jsx(ke,{className:x.sidebarIcon}),style:{viewTransitionName:"var(--vt_search_sidebar)"}})}),e.jsx($e,{onNewThread:s})]})]})}),e.jsx("div",{className:h(x.leadingBar,x.leadingBarScrollAnimation,"pointer-events-none absolute inset-0 h-[calc(100%+var(--sidebar-sticky-header-height,40px))]"),children:"Â "})]})}const ls=We({closeSidebar:{id:"fM0vj3",defaultMessage:"Close Sidebar"}});function bs(){const{clientThreadId:s,onNewThread:n}=D(),[t,o]=i.useState(!1),[a,f]=i.useState(!1),[r,g]=i.useState(!1),{store:p}=L(),v=i.useCallback(u=>u===m.Conversation?t:u===m.Gizmo?a:u===m.Snorlax?r:!1,[t,a,r]),S=i.useCallback((u,c)=>{const l=b=>{u===m.Conversation?o(b):u===m.Gizmo?f(b):u===m.Snorlax&&g(b)};c?l(!0):setTimeout(()=>{l(!1)},100)},[]),j=i.useRef(null);return Je((u,c)=>{S(m.Conversation,!1),S(m.Gizmo,!1),S(m.Snorlax,!1);const l=window.matchMedia("(max-width: 700px)").matches,b=$(j.current);c!=null&&l&&p.getState().isSidebarOpen&&(p.getState().mode===y.Floating||b)&&setTimeout(()=>{document.getElementById(I.OpenOrClosed)?.click()},100)}),e.jsxs(Fe,{value:{isSidebarFlyoutOpen:v,onSidebarFlyoutOpenChange:S},children:[e.jsx(Te,{}),e.jsx(Me,{anchor:"vertical",className:h(x.screen,"popover flex-1 border-r border-r-token-border-xlight"),name:"sidebar",leading:e.jsx(cs,{onNewThread:n}),ref:j,trackLeading:!0,trailing:e.jsx(is,{}),children:e.jsx(ns,{clientThreadId:s})})]})}export{bs as C};
//# sourceMappingURL=hwjau6suar4k89e3.js.map
