import{c as z,j as e,ac as I,L as C,r as b,M as S}from"./lklglvrzltpv3f05.js";import{cx as v,cY as y,cZ as M,U as G,c_ as L,c$ as _,d0 as k,cF as E,cG as N,cB as R,Z as A,Y as F,d1 as P,d2 as f,d3 as x}from"./fn5bn67vlrtkutmt.js";import{dZ as U}from"./dr5q0mnwgdiuy1ac.js";import{G as B}from"./cuav3gl4u7ecbt92.js";function D(){const a=z(),l=v(),n=a.formatMessage({id:"gizmo.exploreStoreEnabled",defaultMessage:"Explore GPTs"});return e.jsx(y,{children:e.jsx(I.div,{whileTap:{scale:.98},children:e.jsx(C,{to:M(),onClick:()=>{l.activeSidebar==="popover-nav"&&G.setActiveSidebar(!1)},children:e.jsx(L,{icon:_,"data-testid":"explore-gpts-button",children:n})},"explore")})})}const T=2;function w({gizmos:a,isGizmoFlyout:l,maxToShowOnLoad:n=4,isScreenArch:d,showAllSidebarItems:p}){const m=P(a,s=>s.flair.kind),r=[...(m[f.Workspace]?.map(({resource:s})=>({gizmo:s,section:x.Workspace}))??[]).slice(0,3),...m[f.FirstParty]?.map(({resource:s})=>({gizmo:s,section:x.Keep}))??[],...m[f.SidebarKeep]?.map(({resource:s})=>({gizmo:s,section:x.Keep}))??[]],c=m[f.Recent]??[],o=(d||p?c:c.slice(0,T)).map(({resource:s})=>({gizmo:s,section:x.Recents})),j=o.length,u=r.length;let t=[];l&&d?t=[...r,...o]:!l&&d?t=r:(t=[...r,...o],p||(t.length>n&&u>n?t=t.slice(0,u):t.length>n&&(t=t.slice(0,n))));const i=d?j>0:a.length>t.length;return{listItems:t,itemsLeft:a.length-t.length,needsToCollapseItems:i,total:a.length}}function Y({gizmo:a,currentGizmoId:l,maxToShowOnLoad:n,hideOverflowMenu:d=!1}){const p=b.useRef(!1),m=!n,r=U(),c=!r.get("enable_arch_updates",!1)||r.get("include_legacy_sidebar_contents",!1),h=v(i=>!k.isGptListCollapsed(i)),{listItems:o,needsToCollapseItems:j,itemsLeft:u}=w({gizmos:a,isGizmoFlyout:m,maxToShowOnLoad:n,isScreenArch:!c,showAllSidebarItems:h});b.useEffect(()=>{o.length>0&&!p.current&&(E({namespace:N.ChatPageLoad})?.logTiming("render_gizmo_sidebar"),p.current=!0)},[o]);function t(i,s){const g=e.jsx(B,{gizmo:i,isActive:i.gizmo.id===l,section:s,hideOverflowMenu:d},i.gizmo.id);return c?g:e.jsx("li",{children:g})}return e.jsxs("div",{children:[o.map(({gizmo:i,section:s},g)=>e.jsxs(b.Fragment,{children:[g>1&&s!==o[g-1].section&&e.jsx("div",{className:"my-2 ml-2 h-px w-7 bg-token-sidebar-surface-tertiary"}),t(i,s)]},g)),c&&j?e.jsxs("button",{onClick:G.toggleGptListCollapsed,className:"flex h-10 w-full items-center gap-2 rounded-lg px-2 text-sm text-token-text-primary hover:bg-token-sidebar-surface-secondary",children:[e.jsx("div",{className:"flex h-6 w-6 flex-shrink-0 items-center justify-center",children:e.jsx(R,{className:"icon-md text-token-text-primary"})}),e.jsx("div",{className:"flex grow items-center gap-1",children:h?e.jsxs(e.Fragment,{children:[e.jsx(S,{id:"GizmoSidebarList.showLess",defaultMessage:"See less"}),e.jsx(A,{className:"icon-xs"})]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{id:"GizmoSidebarList.showMoreItems",defaultMessage:"{numMore} more",values:{numMore:u}}),e.jsx(F,{className:"icon-xs"})]})})]}):null,c&&e.jsx(D,{})]})}export{D as E,Y as G,w as g};
//# sourceMappingURL=pazn8rkwcoqz0ouv.js.map
